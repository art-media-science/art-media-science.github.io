---
# Front-matter to make Jekyll process this file (render to CSS).
---



// Functions.
@use "utilities" as *;

// Basic reset, typography, links.
@use 'reset';
@use 'fonts';
@use 'typography';
@use 'links';



:root {
	@extend %font--calibre--regular;

	--logo--scale: 0.618; // Golden.

	--typography--leading:          1.2;
	--typography--leading--tagline: 1;

	--typography--size:          2rem;
	--typography--size--logo:    calc(var(--typography--size) * 4);
	--typography--size--tagline: calc(var(--typography--size) * 1.2);

	--margin:           calc(var(--typography--size) * 1.2);
	--margin--vertical: var(--margin);

	--pagination--size:         calc(var(--typography--size--logo) * 0.125); // Size of the period in the logo.
	--pagination--size--scaled: calc(var(--pagination--size) * var(--logo--scale));
	--pagination--gutter:       calc(var(--pagination--size--scaled) + var(--margin));

	--page--width: 100vw;

	--column--ratio:             0.382fr 0.618fr; // Golden.
	--column--ratio--pagination: 1fr var(--pagination--size--scaled);

	--color--art:     hsl(360, 55%, 48%);
	--color--media:   hsl(42,  88%, 48%);
	--color--science: hsl(212, 75%, 40%);

	--color--transition: 200ms;

	--color--link:          hsl(0, 0%, 0%, 3.333%);
	--color--link--reverse: hsl(0, 0%, 100%, 6.666%);

	--link--enlargement:    0.4rem;
	--link--highlight:      var(--color--link--reverse);
	--link--outline:        0.2rem;

	scroll-behavior: smooth;

	@include breakpoint(320) { --typography--size: calc((20/375) * 100vw); } // Scale it all down from 20 @ 375.

	@include landscape {
		--logo--scale: 0.75;

		--typography--size--logo: calc(var(--typography--size) * 3.5);

		--column--ratio--pagination: calc((100% - var(--margin)) * 0.382) var(--pagination--size--scaled); // Match parent on left.
	}

	@include breakpoint(768) {
		--logo--scale: 0.618; // Back to Golden.

		--typography--size:          clamp(2.4rem, (24/1440) * 100vw, 2.8rem);
		--typography--size--logo:    calc(var(--typography--size) * 4.5);
		--typography--size--tagline: calc(var(--typography--size) * 1.5);

		--margin: calc(var(--typography--size) * 2);

		--link--enlargement: 0.8rem;
	}

	@include breakpoint(980) { --typography--size--logo: calc(var(--typography--size) * 5.5) }

	@include breakpoint(1640) { --page--width: 164rem; } // Cap width around a 16-inch MacBook Pro.

	@include breakpoint(1772) { // Width cap, plus (now larger) margins.
		@include tall {
			--margin--vertical: calc(var(--margin) * 2);

			--typography--size--logo: calc(var(--typography--size) * 6.5);
		}
	}

	@include browser-specific(safari--mobile) {
		--color--link:          hsl(0, 0%, 0%, 10%);
		--color--link--reverse: hsl(0, 0%, 100%, 20%);
	}



	// From Viewporter JS.
	&.clockwise {
		--safe--inset--left:  0.4rem; // Optical shift.
		--safe--inset--right: calc(env(safe-area-inset-right) - 1.3rem); // Right to notch.
	}

	&.counter-clockwise {
		--safe--inset--left:  calc(env(safe-area-inset-left) - 1.3rem); // Right to notch.
		--safe--inset--right: 0.6rem; // Optical room for scroll indicator.
	}
}



body {
	@import 'scroll';
	@import 'color';

	// iPhone rotation and width caps.
	margin-left:   auto;
	margin-right:  auto;
	padding-left:  var(--safe--inset--left, 0rem);
	padding-right: var(--safe--inset--right, 0rem);
	width:         var(--page--width);

	@include landscape {
		padding-right: calc(var(--safe--inset--right, 0rem));
	}



	// Main layout.
	> main,
	> footer {
		@include landscape {
			column-gap:            var(--margin);
			display:               grid;
			grid-template-columns: var(--column--ratio); // Golden.
			padding-left:          var(--margin);
			padding-right:         var(--margin);
		}
	}

	// The “Art, Science, Media” header and nouns area.
	> main {
		position: sticky;
		top:      calc(-1 * var(--main--height) + var(--tagline--height) + var(--margin--vertical) * 2 - 0.1rem); // Hide overshoots.

		@import 'header';
		@import 'nouns';
	}

	// The “About” section, below.
	> footer {
		min-height: calc(100vh - var(--tagline--height) - var(--margin--vertical) * 2);

		@import 'aside';
		@import 'about';
	}
}
