---
# Front-matter to make Jekyll process this file (render to CSS).
---



// Functions.
@use "utilities" as *;

// Basic reset, typography, links.
@use 'reset';
@use 'fonts';
@use 'typography';
@use 'links';



:root {
	@extend %font--calibre--regular;

	--logo--scale: 0.618; // Golden.

	--margin:              2.4rem;
	--margin--vertical:    var(--margin);
	--typography--leading: 1.2;
	--typography--size:    2rem;

	--column--ratio: 0.382fr 0.618fr; // Golden.

	--color--accent: #d31919; // For now.

	--color:             white;
	--color--background: var(--color--accent);

	--color--link:          rgba(0, 0, 0, 0.033);
	--color--link--reverse: rgba(255, 255, 255, 0.066);

	--link--enlargement:    0.4rem;
	--link--highlight:      var(--color--link--reverse);
	--link--outline:        0.2rem;

	scroll-behavior: smooth;

	@include breakpoint(768) {
		--margin:           4.8rem;
		--typography--size: 2.4rem;

		--link--enlargement: 0.8rem;
	}

	@include breakpoint(1756) { // Width cap, plus margins.
		@include tall { --margin--vertical: calc(var(--margin) * 2); }
	}

	@include browser-specific(safari--mobile) {
		--color--link:          rgba(0, 0, 0, 0.1);
		--color--link--reverse: rgba(255, 255, 255, 0.2);
	}



	// From Viewporter JS.
	&.clockwise {
		--safe--inset--left:  0.4rem; // Optical shift.
		--safe--inset--right: calc(env(safe-area-inset-right) - 1.3rem); // Right to notch.
	}

	&.counter-clockwise {
		--safe--inset--left:  calc(env(safe-area-inset-left) - 1.3rem); // Right to notch.
		--safe--inset--right: 0.6rem; // Optical room for scroll indicator.
	}
}



body {
	// iPhone rotation.
	padding-left:  var(--safe--inset--left, 0rem);
	padding-right: var(--safe--inset--right, 0rem);



	// Cap around a 16-inch MacBook Pro.
	@include breakpoint(1660) {
		margin-left:  auto;
		margin-right: auto;
		width:        166rem;
	}



	// Scrolley stuff.
	--logo--height--scaled: calc(var(--logo--height) * var(--logo--scale, 1));

	--scroll--offset:        calc(var(--logo--height--scaled) + var(--tagline--height) + var(--margin) * 4);
	--scroll--offset--about: calc(var(--tagline--height) + var(--links--height) + var(--margin) * 4);

	@include landscape {
		--scroll--offset:        var(--margin--vertical);
		--scroll--offset--about: calc(var(--margin--vertical) - 0.1rem); // Hide overshoots.
	}

	#art,
	#media,
	#science {
		scroll-margin-top: var(--scroll--offset);
	}

	#about {
		scroll-margin-top: var(--scroll--offset--about);
	}



	// Color transitions.
	&.invert {
		--color:             black;
		--color--background: white;

		--link--highlight: var(--color--link);

		// Current section, from JS.
		.active {
			--color: var(--color--accent);
		}
	}

	&,
	nav,
	aside {
		--color--transition: 200ms;

		background:                 var(--color--background);
		transition-duration:        var(--color--transition);
		transition-property:        background;
		transition-timing-function: linear;
	}

	@include landscape {
		nav,
		aside {
			background: initial;
		}
	}

	// Logo/h1 combo (with transform) in the nav doc.
	p {
		transition-delay:           calc(var(--color--transition) / 4);
		transition-duration:        calc(var(--color--transition) / 2);
		transition-property:        color;
		transition-timing-function: linear;
	}



	// Main layout.
	> main,
	> footer {
		@include landscape {
			column-gap:            var(--margin);
			display:               grid;
			grid-template-columns: var(--column--ratio); // Golden.
			padding-left:          var(--margin);
			padding-right:         var(--margin);
		}
	}

	// The “Art, Science, Media” nav and nouns area.
	> main {
		position: sticky;
		top:      calc(-1 * var(--main--height) + var(--tagline--height) + var(--margin--vertical) * 2 - 0.1rem); // Hide overshoots.

		@import 'nav';
		@import 'nouns';
	}

	// The “About” section, below.
	> footer {
		min-height: calc(100vh - var(--tagline--height) - var(--margin--vertical) * 2);

		@import 'aside';
		@import 'about';
	}
}
